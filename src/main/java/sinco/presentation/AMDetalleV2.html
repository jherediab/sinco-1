<html>
<head>
<title>Detalle de accion de mejora</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link href="media/favicon.ico" rel="icon" type="image/x-icon">
<link href="media/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link rel="stylesheet" href="media/global.css" type="text/css">
<link  type="text/css" rel="stylesheet" href="media/menu.css">

<script type="text/javascript" language="JavaScript" src="media/prototype.js"></script>
<script TYPE="text/javascript" language="JavaScript" src="media/menu.js"></script>
<script TYPE="text/javascript" language="JavaScript" id="elMenu"></script>
<script TYPE="text/javascript" language="JavaScript" src="media/template.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="media/calendar-green.css" title="win2k-cold-1">
<script type="text/javascript" src="media/calendar.js"></script>
<script type="text/javascript" src="media/calendar-es.js"></script>
<script type="text/javascript" src="media/calendar-setup.js"></script>

<SCRIPT TYPE="text/javascript" language="JavaScript" src="media/rutinas.js"></SCRIPT>

<SCRIPT TYPE="text/javascript" language="JavaScript">

function carga(){
  if (document.getElementById('impacto').innerHTML=="Mi Area"){
     document.getElementById('dArea').innerHTML  ="Se implantara en";
  }
  else {
     document.getElementById('dArea').innerHTML  ="Se Registro en ";
  }
  
  try {
    	if (document.forms[0]!=null) {
    		document.forms[0].elements[0].focus();
      }
  }
  catch(e){
  }
}

function Anular(){
 var rta;
 Ocultar();
 rta=validar($('jusAnulacion'),"Justificación","ALFA",0,"OBL","0","99");
 if(!rta){
  Mostrar();
  return false;
 }

 var resp = confirm('Esta seguro de realizar esta operación?'); 
 if(!resp) Mostrar(); 
 return resp;
}


function Salvar10(){
 var rta;
 Ocultar();

 rta=validar($('idObservacionGC'),"Observacion","ALFA",0,"OBL","0","99");
 if(!rta){
   Mostrar();
   return false;
 }
 return true;
}

function Salvar2(){
 var rta;
 Ocultar();

 
 rta=validar($('causaJ'),"Causa","ENT",0,"OBL","0","999");
 if(!rta){
   Mostrar();
   return false;
 }
 
 rta=validar($('fechaRevision'),"Nueva Fecha estimada de Terminacion","FEC",0,"OBL","0","99");
 if(!rta){
   Mostrar();
   return false;
 }

 var dateObj = getFechaActual();
 var laFecha = crearDate($('fechaRevision').value);

 if (laFecha.getTime() < dateObj.getTime())  {
   mostrar_mensaje("La fecha estimada de terminacion no puede ser anterior o igual a la fecha del dia");
   Mostrar();
   return false;
 }
 
 rta=validar($('causaCacao'),"Justificacion de la solicitud","ALFA",0,"OBL","0","99");
 if(!rta){
   Mostrar();
   return false;
 }

 var resp = confirm('Esta seguro de realizar esta operación?'); 
 if(!resp) Mostrar(); 
 return resp;
}

function Salvar3(){
 var rta;
 Ocultar();

 rta=validar($('causaE'),"Causa","ENT",0,"OBL","0","999");
 if(!rta){
   Mostrar();
   return false;
 }
  
 rta=validar($('estado'),"Estado","ENT",0,"OBL","0","999");
 if(!rta){
   Mostrar();
   return false;
 }

 var resp = confirm('Esta seguro de realizar esta operación?'); 
 if(!resp) Mostrar(); 
 return resp;
}

function Salvar6(){
 var rta;
 Ocultar();
 
 rta=validar($('causaR'),"Causa","ENT",0,"OBL","0","999");
 if(!rta){
   Mostrar();
   return false;
 }
 
 rta=validar($('idResponsable'),"Responsable","ENT",0,"OBL","0","99999999999");
 if(!rta){
   Mostrar();
   return false;
 }
 
 return true;
}


function BuscarCausa(causa,objeto,fecha){
    $(objeto).innerHTML=$('_causa'+causa).innerHTML;
	$('fechaRevision').value=$('_fecha'+causa).innerHTML;
}	

function vallength(field, counter, maxlimit) {
  if (($(field).value.length) > maxlimit){
    $(field).value = $(field).value.substring(0, maxlimit);
  }
  else {
    $(counter).value = maxlimit - ($(field).value.length);
  }
}

</SCRIPT>

</head>
<body class="cb" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onLoad="carga();">

 <table  summary="" class="tabw" border="0"  id="mostrarMenu">
  <tr>
   <td>
     <SCRIPT TYPE="text/javascript" language="JavaScript"  >
       new menu (MENU_ITEMS0, MENU_POS0);
     </script>
   </td> 
  </tr>
 </table>
<br> 


<div class="container">

   <div id="Cabecera">
    <table summary=""  class="tabf" border="0">
     <tr>
      <td class ="ca" COLSPAN="4"><span id="numero">&nbsp;</span></td>
     </tr> 
     
     <tr>
           <td class="tit">Impacta en </td>
           <td class="dat" colspan="3"><span id="impacto">&nbsp;</span></td>
     </tr>     

     <tr>
           <td class="tit"><div id="dArea">Se Implantar&aacute; en ó Area que Registro</div></td>
           <td class="dat"><span id="areaImplanta">&nbsp;</span></td>
           <td class="tit">Acci&oacute;n de Mejora registrada por</td>
           <td class="dat"><span id="empleado_cliente">&nbsp;</span></td>
     </tr>

     <tr>
           <td class="tit">Estado</td>
           <td class="dat"><span id="codigo_estado">&nbsp;</span></td>
           <td class="tit">Fecha vigencia</td>
           <td class="dat"><span id="fecha_vigencia">&nbsp;</span></td>
     </tr>

     <tr>
           <td class="tit">El Objetivo</td>
           <td class="dat"><span id="accion">&nbsp;</span></td>
           <td class="tit">Se origina</td>
           <td class="dat"><span id="origen">&nbsp;</span></td>
     </tr>

     <tr>
           <td class="tit">Pertenece al proceso</td>
           <td class="dat"><span id="proceso">&nbsp;</span></td>
           <td class="tit">Subproceso</td>
           <td class="dat"><span id="subproceso">&nbsp;</span></td>
     </tr>

     <tr>
           <td class="tit">Norma</td>
           <td class="dat"><span id="norma">&nbsp;</span></td>
           <td class="tit">Numeral</td>
           <td class="dat"><span id="numeral">&nbsp;</span></td>
     </tr>

     <tr>
           <td class="tit">Problema o situaci&oacute;n a mejorar</td>
           <td class="dat" colspan="3"><span id="descripcion">&nbsp;</span></td>
     </tr>

     <tr>
           <td class="tit">Tema</td>
           <td class="dat"><span id="tema">&nbsp;</span></td>
           <td class="tit">Fecha Generaci&oacute;n</td>
           <td class="dat"><span id="fechaGenerada">&nbsp;</span></td>
     </tr>


     <tr>
           <td class="tit">Fecha Estimada Terminaci&oacute;n</td>
           <td class="dat"><span id="fechaEstimada">&nbsp;</span></td>
           <td class="tit">Fecha Real Terminaci&oacute;n</td>
           <td class="dat"><span id="fechaReal">&nbsp;</span></td>
     </tr>
    </table>
	<br>
   </div>

   <div id="trFinaliza">
   <table summary=""  class="tabf" border="0">
    <tr>
        <td class="tit">La acci&oacute;n de mejoramiento cumplio su objetivo</td>
         <td class="dat" colspan="5"><span id="cumplio">&nbsp;</span></td>
    </tr>

    <tr>
        <td class="tit">Nombre funcionario que la revisa</td>
         <td class="dat"><span id="funcionario1">&nbsp;</span></td>
         <td class="tit">Cargo</td>
         <td class="dat"><span id="cargo1">&nbsp;</span></td>
         <td class="tit">Fecha</td>
         <td class="dat"><span id="fecha1">&nbsp;</span></td>
    </tr>

    <tr>
        <td class="tit">Observaciones al cierre</td>
         <td class="dat" colspan="5"><span id="observacionCierre">&nbsp;</span></td>
    </tr>

    
   </table>
   <br>
  </div>

  <div id="trAreas">
       <table summary=""  class="tabf" border="0" id="areas">
       <caption class="ne">Areas que impacta</caption>
        <tr>
          <td class="cf2">Area</td>
        </tr>
       </table>
    </div>
	
	<div id="detalle">
		<br>
	</div>
	
	<div id="idmostrararchivos">
       <form action="AMBorrarArchivos.po" method="post">
       <table class="tabf" summary=""  border="0" id="detalleArchivos">
       <caption class="ne">Archivos anexos a la acci&oacute;n de mejora</caption>
        <tr>
          <td class="cf2">Borrar</td>
          <td class="cf1">Archivo</td>
          <td class="cf2">Fecha de colocaci&oacute;n</td>
          <td class="cf2">Asociado a Causa Nro</td>
        </tr>
       </table>
       <INPUT TYPE="hidden" NAME="numero" id="idNumeroArch">
       <INPUT TYPE="hidden" NAME="causa" id="idCausaArch">
       <INPUT TYPE="hidden" NAME="pagina" value="AMDetalleV2.po">
       <INPUT class="BOT" TYPE="Submit" id="idBotonArchivos" value="Eliminar archivos marcados">       
       </form> 
      </div>
	
	<div id="idObservaciones">
       <table class="tabf" summary=""  border="0" id="detalleS">
        <caption class="ne">Historia de la acci&oacute;n de la mejora</caption>
        <tr>
              <td class="cf1">Observaci&oacute;n</td>
              <td class="cf2">Fecha</td>
              <td class="cf1">Autor</td>
        </tr>
       </table>
    </div> 

	<div id="trObsGerencia">
        <form name="miForma10" action="AMActV2.po" method="post" onsubmit="return Salvar10();">
          <INPUT TYPE="hidden" id="idNumeroGC" name="numero"> 
          <INPUT TYPE="hidden" name="_operacion" value="OBSGERENCIA">   
          <TEXTAREA class="INP" NAME="observacionGC" id="idObservacionGC" ROWS="3" COLS="80" onkeypress="validarTecla(event, 'AL');"  onkeyDown="textCounter(observacionGC,txtContObservacionGC,1000);" onkeyup="textCounter(observacionGC,txtContObservacionGC,1000);" onpaste="textCounter(observacionGC,txtContObservacionGC,1000);"></TEXTAREA>
          <INPUT TYPE="hidden" name="txtContObservacionGC" value="0">
           <br>
           <INPUT class="BOT" TYPE="Submit" value="Observaciones Area Calidad"><br>
        </form>
    </div>
	
	
	<div id="trPedirCacao">
   <form name="miForma2" action="AMAgregarSeguimiento.po" method="post" onsubmit="return Salvar2();">
    <table summary="" border="0" cellspacing="0" cellpadding="0" class="tabf">
		<tr>
		<td class="ca" colspan="2">Solicitar prorroga</td>
		</tr>

		<tr>
		<td class="tit">Causa</td>
		<td class="tit"><SELECT class="INP" NAME="causa" id="causaJ" onkeydown="return f_salto2(event);" onkeyup="return f_salto(event);" onchange="BuscarCausa(this.value,'accionJ');"></SELECT></td>
		</tr>

		<tr>
		<td class="tit">Acci&oacute;n</td>
		<td class="tit"><Span id="accionJ">&nbsp;</span></td>
		</tr>
		
		<tr>
		<td class="tit">Fecha Estimada de Terminaci&oacute;n</td>
		<td class="dat"><INPUT class="INP" TYPE="Text" NAME="fechaRevision" id="fechaRevision" maxlength="10" size="15" onkeypress="validarTecla(event, 'FE');" onkeydown="return f_salto2(event);" onkeyup="return f_salto(event);">
				  <INPUT TYPE="button" class="BOT" id="bfechaRevision" value="...">
		</td>
		</tr>
		
		<tr>
		<td class="tit">Justificaci&oacute;n</td>
		<td class="dat">     
          <INPUT class="INP" TYPE="text" name="observacion" id="causaCacao" size="130" maxlength="512">
		</td>
		</tr>
     
		<tr>
		<td class="tit">     
		  <INPUT TYPE="hidden" value="0" id="numeroJ" name="numero"> 
		  <INPUT TYPE="hidden" value="Cacao" name="_operacion"> 
		</td>  
		<td class="dat2">     
		   <INPUT class="BOT" TYPE="Submit" value="Solicitar Prorroga"><br>
		</td>  
		</tr>
       </table>
      </form>
    </div>

	<div id="CambiarResp">
	   <form action="AMAgregarSeguimiento.po" name="miForma6" method="post" onsubmit="return Salvar6();">
	   <table summary="" border="0" cellspacing="0" class="tabf">
	   <tr>
		 <td class="ca" colspan="2">Cambiar Responsable</td>
	   </tr>
		<tr>
		<td class="tit">Causa</td>
		<td class="tit"><SELECT class="INP" NAME="causa" id="causaR" onkeydown="return f_salto2(event);" onkeyup="return f_salto(event);"  onchange="BuscarCausa(this.value,'accionR');"></SELECT></td>
		</tr>
	   
		<tr>
		<td class="tit">Acci&oacute;n</td>
		<td class="tit"><Span id="accionR">&nbsp;</span></td>
		</tr>
		
	   
	   <tr>
		 <td class="tit">Nuevo Responsable</td>
		 <td class="tit"><SELECT class="INP" NAME="responsable" id="idResponsable" onkeydown="return f_salto2(event);" onkeyup="return f_salto(event);"></SELECT></td>
	   </tr>
	   <tr>
		 <td class="tit"><INPUT TYPE="hidden" name="numero" id="numeroR">
		 <INPUT TYPE="hidden" value="CambioResp" name="_operacion">
		 </td>
		 <td  class="dat2"><INPUT class="BOT" TYPE="Submit" value="Cambiar Responsable"  name="miBoton"></td>
	   </tr>
	   </table>
	   </form>                   
    </div>

	<div id="trCambioEstado">
	<form name="miForma3" action="AMAgregarSeguimiento.po" method="post" onsubmit="return Salvar3();">
    <table summary="" border="0" cellspacing="0" cellpadding="0" class="tabf">
     <tr>
       <td class="ca" colspan="2">Cambios de estado</td>
     </tr>
	 
	 <tr>
	  <td class="tit">Causa</td>
	  <td class="tit"><SELECT class="INP" NAME="causa" id="causaE" onkeydown="return f_salto2(event);" onkeyup="return f_salto(event);" onchange="BuscarCausa(this.value,'accionE');"></SELECT></td>
	 </tr>
	 
	<tr>
  	 <td class="tit">Acci&oacute;n</td>
	 <td class="tit"><Span id="accionE">&nbsp;</span></td>
	</tr>
	 
     <tr>
       <td class="tit">Estado</td>
       <td class="dat"><SELECT id="estado" NAME="estado" onkeydown="return f_salto2(event);" onkeyup="return f_salto(event);"></SELECT></td>
     </tr>
     <tr>
       <td class="tit">An&aacute;lisis del cierre</td>
       <td class="dat"><INPUT class="INP" TYPE="Text" NAME="observacion" maxlength="100" size="120" onkeypress="validarTecla(event, 'AL');" onkeydown="return f_salto2(event);" onkeyup="return f_salto(event);"></td>
     </tr>
     <tr>
      <td class="tit">     
       <INPUT TYPE="hidden" value="0" id="numeroE" name="numero"> 
       <INPUT TYPE="hidden" value="CambioEstado" name="_operacion"> 
      </td>  
      <td class="dat2"> 
           <INPUT class="BOT" TYPE="Submit" value="Cambio de estado"><br>
       </td>  
     </tr>
     </table>
    </form>
   </div>
	

      <table id="trAnular" class="tabw"  summary=""  border="0" >
       <tr>            
        <td  colspan="3" class="dat2">
         <FORM name="miForma5" ACTION="AMActV2.po" method="post"  onsubmit="return Anular();">
          <INPUT TYPE="hidden" name="numero" id="idNumeroAn">
          <INPUT TYPE="hidden" name="_operacion" value="A">
          <INPUT class="INP" TYPE="text" name="justificacion" id="jusAnulacion" size="70" maxlength="255">
          <INPUT class="BOT" TYPE="Submit" name="miBoton" VALUE="Anular acci&oacute;n">
         </FORM>
        </td>
       </tr>            
      </table>
	
	<div id="botones">
	<br>
      <table class="tabp" align="center" summary=""  border="0" >
       <tr>
        <td id="trPreModificar">
         <FORM name="miForma1" ACTION="AMActV2.po" method="post" onsubmit="return Ocultar();">
          <INPUT TYPE="hidden" name="numero" id="idNumeroMo">
          <INPUT TYPE="hidden" name="_operacion" value="P">
          <INPUT class="BOT" TYPE="Submit" VALUE="Modificar" name="miBoton" onMouseOver="window.status='Get off me!'; return true">
         </FORM>
        </td>

        <td id="trNuevaCausa">
         <FORM name="miForma2" id="miForma2" ACTION="AMActCausasV2.po" method="post" onsubmit="return Ocultar();">
          <INPUT TYPE="hidden" name="numero" id="idNumeroNc">
           <INPUT class="BOT" TYPE="Submit" VALUE="Agregar causa"  name="miBoton">
         </FORM>
        </td>

        <td id="trAgregarArchivo">
           <form name="miForma3" action="AMPreArchivos.po" method="post" onsubmit="return Ocultar();">
             <INPUT TYPE="hidden" name="numero" id="idNumeroAr">
             <INPUT TYPE="hidden" name="causa" id="idCausaAr" value="0">
             <INPUT class="BOT" TYPE="Submit" value="Anexar Archivos" name="miBoton" >
            </form>
        </td>
        
        <td id="trEnviar">
         <FORM name="miForma4" ACTION="AMActV2.po" method="post" onsubmit="return Ocultar();">
          <INPUT TYPE="hidden" name="numero" id="idNumeroEn">
          <INPUT TYPE="hidden" name="_operacion" value="R">
          <INPUT TYPE="hidden" name="justificacion" maxlength="255">               
           <INPUT class="BOT" TYPE="Submit" VALUE="Grabar" name="miBoton" >
         </FORM>
        </td>

        <td id="trCerrar">
         <FORM name="miForma6" ACTION="AMActV2.po" method="post" onsubmit="return Ocultar();">
          <INPUT TYPE="hidden" name="numero" id="idNumeroCe">
          <INPUT TYPE="hidden" name="_operacion" value="FINALIZA">
          <INPUT class="BOT" TYPE="Submit" name="miBoton" VALUE="Finalizar acci&oacute;n">
         </FORM>
        </td>             

        <td id="trCalificar">
         <FORM name="miForma7" ACTION="AMPreCerrar.po" method="post" onsubmit="return Ocultar();">
          <INPUT TYPE="hidden" name="numero" id="idNumeroCa">
          <INPUT class="BOT" TYPE="Submit" name="miBoton" VALUE="Calificar la acci&oacute;n">
         </FORM>
        </td>             

        <td id="trBitacora">
         <FORM name="miForma8" target="_blank" ACTION="BitacoraListar.po" method="post">
          <INPUT TYPE="hidden" name="tabla" value="AM_ACCIONES">
          <INPUT TYPE="hidden" name="llave" id="llave">
          <INPUT class="BOT" TYPE="Submit" name="miBoton" VALUE="Ver Bit&aacute;cora">
         </FORM>
        </td>             
       </tr>            
      </table>
    </div>
   </div>
   
   <script type="text/javascript">
     Calendar.setup({
       inputField :  'fechaRevision',
       ifFormat   :  '%Y-%m-%d',
       button     :  'bfechaRevision'
      });
   </script>   
</body>
</html>

